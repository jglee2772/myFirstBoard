<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚀 CYBER_BOARD - 회원가입</title>
    <link rel="stylesheet" th:href="@{/css/base.css}">
    <link rel="stylesheet" th:href="@{/css/auth.css}">
</head>
<body>
<header>
    <nav>
        <a href="/" class="brand glow">⚡ CYBER_BOARD ⚡</a>
        <div class="nav-links">
            <a href="/articles" class="btn">게시판</a>
            <a href="/login" class="btn">로그인</a>
        </div>
    </nav>
</header>

<main>
    <div class="card join-card">
        <h1>🚀 네트워크 등록</h1>
        
        <form method="post" action="/join" th:object="${joinRequest}" class="join-form">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
            
            <div class="form-group">
                <label for="email">📧 이메일 주소</label>
                <input type="email" id="email" th:field="*{email}" class="form-control" required 
                       placeholder="your.email@example.com">
                <div th:if="${#fields.hasErrors('email')}" class="error-message" th:errors="*{email}"></div>
            </div>
            
            <div class="form-group">
                <label for="name">👤 사용자명</label>
                <input type="text" id="name" th:field="*{name}" class="form-control" required 
                       placeholder="Your Name">
                <div th:if="${#fields.hasErrors('name')}" class="error-message" th:errors="*{name}"></div>
            </div>
            
            <div class="form-group">
                <label for="password">🔒 보안 키</label>
                <input type="password" id="password" th:field="*{password}" class="form-control" required 
                       placeholder="••••••••">
                <div th:if="${#fields.hasErrors('password')}" class="error-message" th:errors="*{password}"></div>
            </div>
            
            <div class="form-group">
                <label for="passwordConfirm">🔐 보안 키 확인</label>
                <input type="password" id="passwordConfirm" name="passwordConfirm" class="form-control" required 
                       placeholder="••••••••">
                <div id="passwordError" class="error-message" style="display: none; color: var(--neon-pink);">
                    비밀번호가 일치하지 않습니다.
                </div>
            </div>
            
            <div th:if="${error}" class="error-message" style="background: rgba(255, 0, 64, 0.1); border: 1px solid var(--neon-pink); border-radius: 8px; padding: 1rem; margin-bottom: 1rem; text-align: center; font-weight: 600;">
                <span style="color: var(--neon-pink);">⚠️ </span>
                <span th:text="${error}"></span>
            </div>
            
            <div class="form-actions">
                <button type="submit" id="submitBtn" class="btn" style="width: 100%; margin-bottom: 1rem;">
                    ⚡ 네트워크 등록
                </button>
            </div>
        </form>
        
        <!-- 승인 대기 안내 메시지 -->
        <div class="approval-notice" style="background: rgba(0, 123, 255, 0.1); border: 1px solid var(--neon-blue); border-radius: 8px; padding: 1rem; margin-top: 1rem; text-align: center;">
            <p style="color: var(--neon-blue); margin: 0; font-weight: 600;">
                ⏳ 회원가입 후 관리자 승인이 필요합니다.
            </p>
            <p style="color: var(--text-secondary); margin: 0.5rem 0 0 0; font-size: 0.9rem;">
                승인 완료 후 로그인이 가능합니다.
            </p>
        </div>
        
        <div class="oauth-section">
            <div class="divider">
                <span>또는</span>
            </div>
            
            <a href="/oauth2/authorization/google" class="btn oauth-btn">
                🌐 Google OAuth 등록
            </a>
        </div>
        
        <div class="login-link">
            <p>이미 계정이 있으신가요? <a href="/login" style="color: var(--neon-green);">로그인</a></p>
        </div>
    </div>
</main>
<script src="https://code.jquery.com/jquery-latest.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const password = document.getElementById('password');
    const passwordConfirm = document.getElementById('passwordConfirm');
    const passwordError = document.getElementById('passwordError');
    const submitBtn = document.getElementById('submitBtn');
    const form = document.querySelector('.join-form');
    
    function checkPasswordMatch() {
        if (password.value && passwordConfirm.value) {
            if (password.value !== passwordConfirm.value) {
                passwordError.style.display = 'block';
                submitBtn.disabled = true;
                submitBtn.style.opacity = '0.5';
                submitBtn.style.cursor = 'not-allowed';
            } else {
                passwordError.style.display = 'none';
                submitBtn.disabled = false;
                submitBtn.style.opacity = '1';
                submitBtn.style.cursor = 'pointer';
            }
        } else {
            passwordError.style.display = 'none';
            submitBtn.disabled = false;
            submitBtn.style.opacity = '1';
            submitBtn.style.cursor = 'pointer';
        }
    }
    
    password.addEventListener('input', checkPasswordMatch);
    passwordConfirm.addEventListener('input', checkPasswordMatch);
    
    form.addEventListener('submit', function(e) {
        if (password.value !== passwordConfirm.value) {
            e.preventDefault();
            passwordError.style.display = 'block';
            passwordConfirm.focus();
            return false;
        }
    });
});
</script>


</body>
</html>

